# Base Image
FROM python:3.9-slim

# Working Directory
WORKDIR /app

# Install dependencies
# We use standard library for sockets/time, so only need FastAPI framework
RUN pip install --no-cache-dir fastapi uvicorn jinja2

# Copy the Client SDK (beamng_edu.py)
COPY beamng_edu.py /app/beamng_edu.py

# Copy the Web Application
COPY web_app /app/web_app

# Expose the API Port
EXPOSE 8000

# Run command
# We use host 0.0.0.0 to be accessible from outside the container
CMD ["uvicorn", "web_app.main:app", "--host", "0.0.0.0", "--port", "8000"]
